{
  "permissions": {
    "allow": [
      "Bash(timeout 5 npm run dev:*)",
      "Bash(taskkill:*)",
      "mcp__supabase__query_table",
      "Bash(npm run dev:*)",
      "mcp__plugin_supabase_supabase__list_tables",
      "mcp__plugin_supabase_supabase__execute_sql",
      "Bash(pkill:*)",
      "Bash(git log:*)",
      "Bash(psql:*)",
      "Bash(git restore:*)",
      "Bash(git clean:*)",
      "mcp__plugin_supabase_supabase__list_projects",
      "Bash(curl:*)",
      "Bash(node:*)",
      "Bash(npx tsc:*)",
      "Bash(npm --version:*)",
      "Bash(npm cache clean:*)",
      "mcp__plugin_supabase_supabase__apply_migration",
      "Bash(python3:*)",
      "Bash(npm run build 2>&1 | tail -50)",
      "Bash(npm run build 2>&1 | tail -30)",
      "Bash(node_modules/.bin/tsc --noEmit --skipLibCheck 2>&1 | grep \"AgendaAnalistas\" | head -20)",
      "Bash(npm run build 2>&1 | head -30)",
      "Bash(awk 'NR>=735 && NR<=740' /home/pi/rh-system/cargos-salarios/src/app/components/VacancyManagement.tsx)",
      "Bash(npm run build 2>&1 | tail -20)",
      "mcp__plugin_supabase_supabase__get_logs",
      "Bash(npm run build 2>&1 | tail -8)",
      "Bash(npm run build 2>&1 | tail -5)",
      "mcp__claude_ai_Vercel__list_teams",
      "mcp__claude_ai_Vercel__list_projects",
      "mcp__claude_ai_Vercel__deploy_to_vercel",
      "Bash(vercel deploy --prod 2>&1)",
      "Bash(git -c user.email=\"madukisp@gmail.com\" -c user.name=\"madukisp\" add src/app/services/demissoesService.ts src/app/hooks/useGestaoVagas.ts && git -c user.email=\"madukisp@gmail.com\" -c user.name=\"madukisp\" commit -m \"$\\(cat <<'EOF'\nfix: load responded afastamentos independently of current ORIS status\n\nVagas Fechadas for afastamentos were disappearing after page refresh\nwhen the person had returned to work. New carregarAfastamentosRespondidos\nqueries respostas_gestor + eventos_movimentacao + oris_funcionarios\nwithout filtering by current situacao, so answered afastamentos always\nappear in Vagas Fechadas regardless of ORIS status.\n\nCo-Authored-By: Claude Sonnet 4.6 <noreply@anthropic.com>\nEOF\n\\)\" && git push)",
      "Bash(gh auth status 2>&1)",
      "Bash(git config --list)",
      "Bash(npm run build 2>&1 | tail -15)",
      "Bash(npm run build 2>&1 | tail -12)",
      "Bash(./node_modules/.bin/tsc --noEmit 2>&1 | head -30)",
      "Bash(node_modules/.bin/vite build 2>&1 | head -50)",
      "Bash(npm run build 2>&1 | tail -10)",
      "Bash(npm run build 2>&1 | tail -6)",
      "Bash(find /home/pi/rh-system/cargos-salarios -name \"*.md\" -type f 2>/dev/null | head -20)",
      "Bash(grep -r \"base_bi\\\\|base-bi\\\\|baseBi\" /home/pi/rh-system/cargos-salarios --include=\"*.ts\" --include=\"*.tsx\" --include=\"*.js\" --include=\"*.jsx\" --include=\"*.py\" 2>/dev/null | head -30)",
      "Bash(./node_modules/.bin/tsc --noEmit 2>&1 | head -40)",
      "Bash(grep:*)",
      "Bash(tail:*)",
      "Bash(cd /p/rh-system/cargos-salarios && ./node_modules/.bin/vite --version 2>&1)",
      "Bash(cd:*)",
      "Bash(head:*)",
      "Bash(cd \"P:/rh-system/cargos-salarios\" && node_modules/.bin/vite --version 2>&1)",
      "Bash(ls -la *.md | head -20)",
      "Bash(git add src/app/services/demissoesService.ts && git commit -m \"$\\(cat <<'EOF'\nfix: use eventos_gestao_vagas_public view for both PENDENTE and RESPONDIDO status\n\nPreviously, only RESPONDIDO status was using the automated view \n'eventos_gestao_vagas_public', while PENDENTE status was querying \n'oris_funcionarios' directly, bypassing the automatic synchronization.\n\nNow both status queries use the same view source, ensuring that new \ndismissals are automatically reflected in the pending vacancies list \nwithout manual refresh. This eliminates the sync gap between the two code paths.\n\nChanges:\n- Unified carregarDemissoes\\(\\) to use eventos_gestao_vagas_public for both PENDENTE and RESPONDIDO\n- Removed redundant oris_funcionarios scanning and event mapping logic for PENDENTE\n- Simplified code while maintaining the same enrichment with tipo_rescisao, carga_horaria_semanal, escala\n\nCo-Authored-By: Claude Haiku 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(source .env.local && node << 'EOF'\nconst { createClient } = require\\('@supabase/supabase-js'\\);\n\nconst supabaseUrl = process.env.VITE_SUPABASE_URL;\nconst supabaseKey = process.env.VITE_SUPABASE_ANON_KEY;\n\nconsole.log\\('URL:', supabaseUrl\\);\n\nconst supabase = createClient\\(supabaseUrl, supabaseKey\\);\n\nasync function check\\(\\) {\n  console.log\\('\\\\n=== Procurando RAFAEL GEVEGIER DA SILVA ===\\\\n'\\);\n\n  // 1. Em oris_funcionarios\n  const { data: oris, error: e1 } = await supabase\n    .from\\('oris_funcionarios'\\)\n    .select\\('id,nome,situacao,dt_rescisao,centro_custo,nome_fantasia,cnpj'\\)\n    .ilike\\('nome', '%RAFAEL%GEVEGIER%'\\);\n\n  if \\(e1\\) {\n    console.error\\('❌ Erro ORIS:', e1.message\\);\n    return;\n  }\n  \n  if \\(oris && oris.length > 0\\) {\n    console.log\\('✅ ORIS encontrado:'\\);\n    oris.forEach\\(o => {\n      console.log\\(`   ID: ${o.id}`\\);\n      console.log\\(`   Nome: ${o.nome}`\\);\n      console.log\\(`   Situação: ${o.situacao}`\\);\n      console.log\\(`   Data rescisão: ${o.dt_rescisao}`\\);\n      console.log\\(`   Centro custo: ${o.centro_custo}`\\);\n      console.log\\(`   CNPJ: ${o.cnpj}`\\);\n    }\\);\n  } else {\n    console.log\\('❌ Não encontrado em oris_funcionarios'\\);\n    return;\n  }\n\n  const funcId = oris[0].id;\n\n  // 2. Em eventos_movimentacao\n  const { data: eventos, error: e2 } = await supabase\n    .from\\('eventos_movimentacao'\\)\n    .select\\('*'\\)\n    .eq\\('id_funcionario', funcId\\);\n\n  console.log\\('\\\\n=== eventos_movimentacao ==='\\);\n  if \\(e2\\) console.error\\('❌ Erro:', e2.message\\);\n  if \\(eventos && eventos.length > 0\\) {\n    console.log\\('✅ Eventos encontrados:', JSON.stringify\\(eventos, null, 2\\)\\);\n  } else {\n    console.log\\('❌ Nenhum evento em eventos_movimentacao'\\);\n  }\n\n  // 3. Em eventos_gestao_vagas_public\n  const { data: vagas, error: e3 } = await supabase\n    .from\\('eventos_gestao_vagas_public'\\)\n    .select\\('*'\\)\n    .ilike\\('nome', '%RAFAEL%GEVEGIER%'\\);\n\n  console.log\\('\\\\n=== eventos_gestao_vagas_public ==='\\);\n  if \\(e3\\) console.error\\('❌ Erro:', e3.message\\);\n  if \\(vagas && vagas.length > 0\\) {\n    console.log\\('✅ Vagas encontradas:'\\);\n    console.log\\(JSON.stringify\\(vagas, null, 2\\)\\);\n  } else {\n    console.log\\('❌ Nenhuma vaga em eventos_gestao_vagas_public'\\);\n  }\n\n  // 4. Em respostas_gestor\n  const eventId = eventos?.[0]?.id_evento || funcId;\n  const { data: respostas, error: e4 } = await supabase\n    .from\\('respostas_gestor'\\)\n    .select\\('*'\\)\n    .eq\\('id_evento', eventId\\);\n\n  console.log\\('\\\\n=== respostas_gestor ==='\\);\n  if \\(e4\\) console.error\\('❌ Erro:', e4.message\\);\n  if \\(respostas && respostas.length > 0\\) {\n    console.log\\('⚠️  Resposta encontrada:'\\);\n    console.log\\(JSON.stringify\\(respostas, null, 2\\)\\);\n  } else {\n    console.log\\('✅ Nenhuma resposta'\\);\n  }\n\n  console.log\\('\\\\n=== DIAGNOSIS ==='\\);\n  const situation = oris[0].situacao;\n  const hasEvent = eventos?.length > 0;\n  const hasResponse = respostas?.length > 0;\n  const appearsInView = vagas?.length > 0;\n\n  if \\(situation !== '99-Demitido'\\) {\n    console.log\\(`❌ PROBLEMA: Situação é \"${situation}\", não é '99-Demitido'`\\);\n    console.log\\('   → Não vai aparecer em demissões pendentes'\\);\n  } else {\n    console.log\\(`✅ Situação correta: \"99-Demitido\"`\\);\n  }\n\n  if \\(!appearsInView\\) {\n    console.log\\(`❌ PROBLEMA: Não aparece em eventos_gestao_vagas_public`\\);\n    console.log\\('   → A view não está sincronizando automáticamente'\\);\n  } else {\n    console.log\\(`✅ Aparece na view`\\);\n  }\n\n  if \\(hasResponse\\) {\n    console.log\\(`⚠️  Tem resposta do gestor \\(status RESPONDIDO ou PENDENTE_EFETIVACAO\\)`\\);\n  } else {\n    console.log\\(`✅ Sem resposta \\(correto para PENDENTE\\)`\\);\n  }\n}\n\ncheck\\(\\).catch\\(console.error\\);\nEOF)"
    ]
  },
  "enabledPlugins": {
    "frontend-design@claude-plugins-official": true
  }
}
